include /_jade/base/_functions

//- Counter variables.
-var definitionNo = 0
-var exampleNo = 0
-var theoremNo = 0
-var exerciseNo = 0

//- Default counter values for proofs and solutions.
-var proofNo = 0
-var solutionNo = 0

//-Retrieve the appropriate locale variables
-
    let localeModulesVariables = fetchCurrentLocaleVariables();
    let modules;
    if (localeModulesVariables) {
        modules = localeModulesVariables.modules;
    } else {
        console.warn(
            "Warning: Could not retrieve the locale variables at "
            + getCurrentRelativePath() 
            + ", modules are unusable."
        );
    }

//- Adds a numbered definition block.
    Usage:
    +definition()
        p A function is ...
mixin definition(title)
    -definitionNo++
    section.module.definition(id!="definition-" + definitionNo)&attributes(attributes)
        header!=modules.definition + ' ' + definitionNo
            if title
                span!=": " + title
            i.fa.fa-fw.fa-caret-up.toggler
        article
            block

//- Adds a reference to a definition in the current document.
    The step is relative to declaration of the reference, meaning that
    a step of 0 is the latest module declared and a step of 1 is the 
    following module.
mixin refDefinition(step)
    -reference = definitionNo + step;
    a(href!='#' + "definition-" + reference)
        block
           
//- Adds a numbered example block.
    Usage:
    +example()
        p Given the values of ...        
mixin example(title)
    -exampleNo++
    section.module.example(id!="example-" + exampleNo)&attributes(attributes)
        header!=modules.example + ' ' + exampleNo
            if title
                span!=": " + title
            i.fa.fa-fw.fa-caret-up.toggler
        article
            block

//- Adds a reference to an example in the current document.
    The step is relative to declaration of the reference, meaning that
    a step of 0 is the latest module declared and a step of 1 is the 
    following module.
mixin refExample(step)
    -reference = exampleNo + step;
    a(href!='#' + "example-" + reference)
        block

//- Adds a numbered theorem block.
    Usage:
    +theorem()
        p Given the values of ...
mixin theorem(title)
    -proofNo = 0
    -theoremNo++
    section.module.theorem(id!="theorem-" + theoremNo)&attributes(attributes)
        header!=modules.theorem + ' ' + theoremNo
            if title
                span!=": " + title
            i.fa.fa-fw.fa-caret-up.toggler
        article
            block

//- Adds a reference to a theorem in the current document.
    The step is relative to declaration of the reference, meaning that
    a step of 0 is the latest module declared and a step of 1 is the 
    following module.
mixin refTheorem(step)
    -reference = theoremNo + step;
    a(href!='#' + "theorem-" + reference)
        block

//- Adds a numbered proof block. Proofs are collapsed by default.
    Should only be featured in a theorem block.
    Usage:
    +theorem()
        p ...
        +proof()
            p ... 
mixin proof(title)
    -proofNo++
    section.module.proof(id!="proof-" + proofNo collapsed='')&attributes(attributes)
        header!=modules.proof + ' ' + proofNo
            if title
                span!=": " + title
            i.fa.fa-fw.fa-caret-up.toggler
        article
            block

//- Adds a reference to a proof in the current document.
    The step is relative to declaration of the reference, meaning that
    a step of 0 is the latest module declared and a step of 1 is the 
    following module.
mixin refProof(step)
    -reference = proofNo + step;
    a(href!='#' + "proof-" + reference)
        block

//- Adds a numbered exercise block.
    Usage:
    +exercise()
        p Solve the following ...
mixin exercise(title)
    -solutionNo = 0
    -exerciseNo++
    section.module.exercise(id!="exercise-" + exerciseNo)&attributes(attributes)
        header!=modules.exercise + ' ' + exerciseNo
            if title
                span!=": " + title
            i.fa.fa-fw.fa-caret-up.toggler
        article
            block

//- Adds a reference to an exercise in the current document.
    The step is relative to declaration of the reference, meaning that
    a step of 0 is the latest module declared and a step of 1 is the 
    following module.
mixin refExercise(step)
    -reference = exerciseNo + step;
    a(href!='#' + "exercise-" + reference)
        block

//- Adds a numbered solution block. Solutions are collapsed by default.
    Should only be featured in an exercise block.
    Usage:
    +exercise()
        p ...
        +solution()
            p ...
mixin solution(title)
    -solutionNo++
    section.module.solution(id!="solution-" + solutionNo collapsed='')&attributes(attributes)
        header!=modules.solution + ' ' + solutionNo
            if title
                span!=": " + title
            i.fa.fa-fw.fa-caret-down.toggler
        article
            block

//- Adds a reference to a solution in the current document.
    The step is relative to declaration of the reference, meaning that
    a step of 0 is the latest module declared and a step of 1 is the 
    following module.
mixin refSolution(step)
    -reference = solutionNo + step;
    a(href!='#' + "solution-" + reference)
        block