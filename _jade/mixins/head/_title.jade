include /_jade/base/_functions

//- Adds the metadata for the document title.
    A default title may be provided, but may cause
    certain documents to share the same name.
mixin metaTitle(defaultTitle)
    -
        /**
            Fetches the title of the current document.
        */
        function fetchDocumentTitle(defaultTitle) {
            var metadata = fetchDocumentMetadata();
            if (metadata && metadata.headline) {
                return metadata.headline;
            } else {
                console.info(
                    "Info: Using default title for " + getCurrentRelativePath()
                );
            }
            return defaultTitle;
        }

        var documentTitle = fetchDocumentTitle(defaultTitle);
        
    if documentTitle
        +assignTitle(documentTitle)
    else if defaultTitle
        +assignTitle(defaultTitle)
    else
        -
            console.error(
                "Error: Could not locate the document title for " 
                + getCurrentRelativePath()
            );

//- Assigns the title of the document.
mixin assignTitle(title)
    if title.length > 70
        -
            console.warn(
                "Warning: Document title exceeds 70 characters "
                + "(current length: " + title.length + ")" 
                + " for document at " + getCurrentRelativePath()
            );
    //- Add meta tags
    title!=title
    meta(
        property='og:title' 
        content!=title
    )
    meta(
        name='twitter:title' 
        content!=title
    )